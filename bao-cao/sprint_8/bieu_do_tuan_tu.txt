@startuml
!pragma useUnicode true
skinparam dpi 150
skinparam sequence {
  LifeLineBorderColor #3B82F6
  LifeLineBackgroundColor #E6F2FF
  ArrowColor #000000
  ParticipantFontSize 15
  BoxFontSize 15
  ParticipantBorderColor #3B82F6
  ParticipantBackgroundColor #E6F2FF
}
hide footbox

actor "Người dùng" as User
participant ":Giao diện" as UI
participant ":Hệ thống" as System
participant ":Cơ sở dữ liệu" as DB

activate User

' === 1. Mở trang Dashboard thống kê dự án ===
User -> UI: 1. Mở trang Dashboard thống kê
activate UI
UI -> System: 2. Yêu cầu dữ liệu thống kê dự án
activate System
System -> DB: 3. Lấy dữ liệu dự án, cột, nhiệm vụ, thành viên và bình luận
activate DB
DB --> System: Dữ liệu thô
deactivate DB

System -> System: 4. Tính toán thống kê\n(tổng quan, trạng thái nhiệm vụ,\nxu hướng, hiệu suất, bình luận,\nphân bổ công việc, chất lượng hoàn thành)
System --> UI: 5. Trả dữ liệu thống kê đã tổng hợp
deactivate System
UI --> User: 6. Hiển thị Dashboard thống kê
deactivate UI


' === 2. Xem thống kê tổng quan ===
User -> UI: 7. Chọn khu vực thống kê tổng quan
activate UI
UI -> System: 8. Yêu cầu dữ liệu tổng quan
activate System
System -> DB: 9. Thống kê số cột, nhiệm vụ, thành viên, bình luận
activate DB
DB --> System: Thống kê tổng quan
deactivate DB
System --> UI: 10. Trả dữ liệu tổng quan
deactivate System
UI --> User: 11. Hiển thị thẻ thống kê tổng quan
deactivate UI


' === 3. Xem thống kê xu hướng nhiệm vụ ===
User -> UI: 12. Chọn xem xu hướng nhiệm vụ
activate UI
UI -> System: 13. Yêu cầu thống kê theo mốc thời gian
activate System
System -> DB: 14. Lấy số nhiệm vụ tạo mới và hoàn thành theo thời gian
activate DB
DB --> System: Dữ liệu xu hướng
deactivate DB
System --> UI: 15. Gửi dữ liệu biểu đồ xu hướng
deactivate System
UI --> User: 16. Hiển thị biểu đồ xu hướng nhiệm vụ
deactivate UI


' === 4. Xem thống kê hiệu suất thành viên ===
User -> UI: 17. Chọn xem hiệu suất thành viên
activate UI
UI -> System: 18. Yêu cầu dữ liệu hiệu suất
activate System
System -> DB: 19. Lấy số nhiệm vụ hoàn thành và mức độ hoạt động theo thành viên
activate DB
DB --> System: Dữ liệu hiệu suất
deactivate DB
System --> UI: 20. Trả dữ liệu biểu đồ hiệu suất
deactivate System
UI --> User: 21. Hiển thị biểu đồ so sánh hiệu suất
deactivate UI


' === 5. Xem thống kê hoạt động bình luận ===
User -> UI: 22. Chọn xem thống kê bình luận
activate UI
UI -> System: 23. Yêu cầu dữ liệu bình luận
activate System
System -> DB: 24. Lấy tổng số bình luận,\ntheo nhiệm vụ, theo thành viên, top nhiệm vụ
activate DB
DB --> System: Dữ liệu bình luận
deactivate DB
System --> UI: 25. Gửi dữ liệu thống kê bình luận
deactivate System
UI --> User: 26. Hiển thị bảng & biểu đồ bình luận
deactivate UI


' === 6. Xem thống kê phân bổ công việc ===
User -> UI: 27. Chọn xem thống kê phân bổ công việc
activate UI
UI -> System: 28. Yêu cầu dữ liệu phân bổ
activate System
System -> DB: 29. Thống kê nhiệm vụ theo loại,\nưu tiên, cột và theo thành viên
activate DB
DB --> System: Dữ liệu phân bổ công việc
deactivate DB
System --> UI: 30. Trả dữ liệu biểu đồ phân bổ
deactivate System
UI --> User: 31. Hiển thị biểu đồ phân bổ công việc
deactivate UI


' === 7. Xem thống kê chất lượng hoàn thành ===
User -> UI: 32. Chọn xem chất lượng hoàn thành
activate UI
UI -> System: 33. Yêu cầu dữ liệu đúng hạn / trễ hạn
activate System
System -> DB: 34. Thống kê nhiệm vụ hoàn thành đúng hạn và trễ hạn
activate DB
DB --> System: Dữ liệu chất lượng hoàn thành
deactivate DB

System --> UI: 35. Trả dữ liệu biểu đồ chất lượng hoàn thành
deactivate System
UI --> User: 36. Hiển thị biểu đồ chất lượng hoàn thành
deactivate UI


' === 8. Dashboard cập nhật khi dữ liệu thay đổi ===
User -> UI: 37. Thay đổi dữ liệu dự án\n(tạo/xóa/sửa nhiệm vụ, bình luận, thành viên)
activate UI
UI -> System: 38. Gửi yêu cầu cập nhật dữ liệu
activate System
System -> DB: 39. Ghi thay đổi vào cơ sở dữ liệu
activate DB
DB --> System: Đã cập nhật dữ liệu
deactivate DB

System -> DB: 40. Tính lại thống kê
activate DB
DB --> System: Dữ liệu thống kê mới
deactivate DB

System --> UI: 41. Gửi dữ liệu thống kê mới
deactivate System
UI --> User: 42. Làm mới Dashboard thống kê dự án
deactivate UI

deactivate User

@enduml
